<!DOCTYPE html>
<html>
    <head>
        <title>Feedbacks</title>
        <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/teacher-feedback-style.css') }}">
    </head>
    <body>
        <header>
            <div-left>
                <img src="{{ url_for('static', filename='pictures/Plugin icon - 3.svg') }}" id="logo">
            </div-left>
            
            <div-right id="div-right">
                <h1>{{fname}}</h1>
                <a href="/logout">
                    <button type="submit" class="button1">Logout</button>
                </a>
                <a href="/profile_teacher">
                    <button type="submit" class="button1">Profile</button>
                </a>
            </div-right>
        </header>
        <div class="main">
            <div class="feedback-histogram">
                <div class="green-block"></div>
                <div class="yellow-block"></div>
                <div class="red-block"></div>
            </div>
            <div class="line"></div>
        </div>
        <div class="feedbacks">
            {% for feedback in feedbacks %}
                <section class="feedback-design">
                    <div class="feedback"><p>{{ feedback.message }}</p></div>
                    {% if feedback.grade == "N/A" %}
                        <form class="reactions" method="POST">
                            <ul>
                                <li class="reaction"><input type="radio" name="reaction" class="checkbox" value="3">
                                    <label class="reaction-text">Outstanding</label>
                                </li>
                                <li class="reaction"><input type="radio" name="reaction" class="checkbox" value="2">
                                    <label class="reaction-text">Neutral</label>
                                </li>
                                <li class="reaction"><input type="radio" name="reaction" class="checkbox" value="1">
                                    <label class="reaction-text">Need improvement</label>
                                </li>
                            </ul>
                            <button class="details-text" onclick="clicked('{{student_email}}', '{{feedback.id}}');" type="button">Confirm</button>
                            <script>
                                function clicked(student_email, feedback_id) {
                                    fetch(`/get_student/${student_email}`)
                                    .then(response => response.json())
                                    .then(data => {
                                        const student = data.student;
                                        console.log(student_email);
                                        window.location = `/reaction/${student_email}/${feedback_id}`;
                                    })
                                    .catch(error => {
                                        console.error('Error: ', error);
                                    });
                                }
                            </script>
                        </form>
                    {% endif %}
                    {% if feedback.grade != "N/A" %}
                        <div class="grade">
                            <p>{{ feedback.grade }}</p>
                        </div>
                    {% endif %}
                </section>
            {% endfor %}
        </div>
    </body>
</html>